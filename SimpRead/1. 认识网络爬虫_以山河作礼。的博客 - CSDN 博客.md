> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [blog.csdn.net](https://blog.csdn.net/weixin_50804299/article/details/129358639?spm=1000.2115.3001.6382&utm_medium=distribute.pc_feed_v2.none-task-blog-hot_rank_bottoming-4-129358639-null-null.pc_personrec&depth_1-utm_source=distribute.pc_feed_v2.none-task-blog-hot_rank_bottoming-4-129358639-null-null.pc_personrec)

### 1. 认识[网络爬虫](https://so.csdn.net/so/search?q=%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB&spm=1001.2101.3001.7020)

*   *   [网络爬虫](#_1)
    *   [爬虫的合法性](#_10)
    *   [HTTP 协议](#HTTP_46)
    *   [请求与响应 (重点)](#_55)

网络爬虫
----

> 爬虫的全名叫网络爬虫，简称爬虫。他还有其他的名字，比如网络机器人，网络蜘蛛等等。爬虫就好像一个探测机器，它的基本操作就是模拟人的行为去各个网站溜达，点点按钮，查查数据，或者把看到的信息背回来。就像一只虫子在一幢楼里不知疲倦地爬来爬去。  
> ![](https://img-blog.csdnimg.cn/c7cd55822973445ba119a3685ace40de.png)

> 你可以这样理解，每个爬虫都是你的分身。就像孙悟空拔了一撮汗毛，吹出一堆猴子一样。  
> 你每天使用的百度，其实就是利用了这种爬虫技术：每天放出无数爬虫到各个网站，把他们的信息抓回来，然后等你来检索。

爬虫的合法性
------

> 爬虫本身没有违法这一说法，它只是一种工具，一种技术。  
> 详情请参考 中国网信网发布的[网络爬虫的法律规制](http://www.cac.gov.cn/2019-06/16/c_1124630015.htm)。

在使用爬虫时候，我们需要谨记三点：  
1、 遵守 [Robots 协议](https://blog.csdn.net/nmk__123/article/details/124896445) (君子协议)：

> robots 是[搜索引擎](https://so.csdn.net/so/search?q=%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E&spm=1001.2101.3001.7020)爬虫协议，也就是你网站和爬虫的协议。

> **简单的理解**：robots 是告诉搜索引擎，你可以爬取收录我的什么页面，你不可以爬取和收录我的那些页面。robots 很好的控制网站那些页面可以被爬取，那些页面不可以被爬取。

> 主流的搜索引擎都会遵守 robots 协议。并且 robots 协议是爬虫爬取网站第一个需要爬取的文件。爬虫爬取 robots 文件后，会读取上面的协议，并准守协议爬取网站，收录网站。

2、不能造成对方服务器瘫痪。

> 但不是说只要遵守 Robots 协议的爬虫就没有问题，还涉及到两个因素，第一不能大规模爬虫导致对方服务器瘫痪，这等于网络攻击。

3、不能非法获利

> 恶意利用爬虫技术抓取数据，攫取不正当竞争的优势，甚至是牟取不法利益的，则可能触犯法律。实践中，非法使用爬虫技术抓取数据而产生的纠纷其实数量并不少，大多是以不正当竞争为由提请诉讼。

**爬虫为什么选择 python：**

> Python 语言具有简单、易学、易读、易维护、用途广泛、速度快、免费、开源等诸多优点。正是因为其中的一些优点让众多程序大佬选择用 Python 来爬虫：

1、简单易学。Python 作为动态语言更适合初学者。Python 可以让初学者把精力集中在编程对象和思维方法上，而不用去担心语法、类型等，并且 Python 语法清晰简洁，调试起来比 Java 简单的多。

2、稳定。Python 的强大架构可以使爬虫程序高效平稳地运行。

3、免费开源。Python 是 FLOSS（自由 / 开放源码软件）之一。使用者可以自由地发布这个软件的拷贝、阅读它的源代码、对它做改动、把它的一部分用于新的自由软件中。

4、速度快。Python 的底层是用 C 语言写的，很多标准库和第三方库也都是用 C 写的，运行速度非常快。

5、可拓展性。如果需要一段关键代码运行得更快，可以部分程序用 C 或 C++ 编写，然后在 Python 程序中使用它们，因此 Python 适合一些可扩展的后台应用。

6、多线程。爬虫是一个典型的多任务处理场景，请求页面时会有较长的延迟，总体来说更多的是等待。Python 多线程或进程会更优化程序效率，提升整个系统下载和分析能力。

HTTP 协议
-------

> 超文本传输协议（英文：HyperText Transfer Protocol，缩写：HTTP）是一种用于分布式、协作式和超媒体信息系统的应用层协议。HTTP 是万维网的数据通信的基础。

**工作原理：**  
HTTP 协议定义 Web 客户端如何从 Web 服务器请求 Web 页面，以及服务器如何把 Web 页面传送给客户端。HTTP 协议采用了请求 / 响应模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。

![](https://img-blog.csdnimg.cn/c334f467c94a4e048f061b282d80e433.png)

![](https://img-blog.csdnimg.cn/6ec8be3d17df44199e9c03522e5b6695.png)

请求与响应 (重点)
----------

> **HTTP 请求过程**  
> ​我们在浏览器中输入一个 URL，回车之后便会在浏览器中观察到页面内容。实际上，这个过程是浏览器向网站所在的服务器发送了一个请求，网站服务器接受到这个请求后进行处理和解析，然后返回对应的响应，接着传回给浏览器。响应里包含了页面的源代码等内容，浏览器再对其进行解析，便将网页呈现了出来。

```
'''
请求

请求行 请求方式 （get，post）请求地址（url）-》 协议(http)

请求头 -》 放在服务器上要使用的信息，爬虫需要的重要内容（头部，cookie，）

请求体 -》一般放一些参数（get，post）



响应

状态行 -》协议 状态码 （100）

响应头 -》放在客户端上要使用的信息

响应体 —》返回客户端上的数据（html页面，json数据等）
'''
```

**以淘宝网页版举例：**

> 打开一个网页:

![](https://img-blog.csdnimg.cn/449748ef036f4c749e9315f3ea2d1bb8.png)

> 如何鼠标右键，点击检查, 或者查看页面源代码，就可以查看页面的源代码。

![](https://img-blog.csdnimg.cn/3098221db9f74bc08fc212d306987020.png)

> 接着点击网络，然后刷新，点击文档，选择文档  
> ![](https://img-blog.csdnimg.cn/a52877678125476c80dadd6e6546ab91.png)

> 文档名字和链接基本上是相同的。  
> 然后右键点击文档。出现下列数据：

![](https://img-blog.csdnimg.cn/05116e2d77474d9fb557a4ec775612c9.png)

**响应体：**

![](https://img-blog.csdnimg.cn/d858beff5b454a4284333f57c1fdc525.png)

状态码：

> http 爬虫常返回的状态码以及解决方法  
> 100：继续 客户端应当继续发送请求。客户端应当继续发送请求的剩余部分，或者如果请求已经完成，忽略这个响应。

> 101： 转换协议 在发送完这个响应最后的空行后，服务器将会切换到在 Upgrade 消息头中定义的那些协议。只有在切换新的协议更有好处的时候才应该采取类似措施。

> 200：请求成功 处理方式：获得响应的内容，进行处理

> 201：请求完成，结果是创建了新资源。新创建资源的 URI 可在响应的实体中得到 处理方式：爬虫中不会遇到

> 202：请求被接受，但处理尚未完成 处理方式：阻塞等待

> 204：服务器端已经实现了请求，但是没有返回新的信 息。如果客户是用户代理，则无须为此更新自身的文档视图。 处理方式：丢弃

> 300：该状态码不被 HTTP/1.0 的应用程序直接使用， 只是作为 3XX 类型回应的默认解释。存在多个可用的被请求资源。 处理方式：若程序中能够处理，则进行进一步处理，如果程序中不能处理，则丢弃

> 301：请求到的资源都会分配一个永久的 URL，这样就可以在将来通过该 URL 来访问此资源 处理方式：重定向到分配的 URL（永久重定向，重要）

> 302：请求到的资源在一个不同的 URL 处临时保存 处理方式：重定向到临时的 URL（临时重定向，重要）

> 304：请求的资源未更新 处理方式：丢弃，使用本地缓存文件（没有发送请求，用的是本地缓存文件，重要）

> 400：非法请求 处理方式：丢弃  
> 401：未授权 处理方式：丢弃  
> 403：禁止 处理方式：丢弃  
> 404：没有找到 处理方式：丢弃  
> 405：请求方式不对

> 500：服务器内部错误 服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理。一般来说，这个问题都会在服务器端的源代码出现错误时出现。（服务器问题，代码有问题，重要）

> 501：服务器无法识别 服务器不支持当前请求所需要的某个功能。当服务器无法识别请求的方法，并且无法支持其对任何资源的请求。

> 502：错误网关 作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。

**cookie 与 session id**  
cookie

> 指某些网站为了辨别用户身份、进行 session 跟踪而存储在用户本地终端上的数据（通常经过加密）。也就是说如果知道一个用户的 Cookie，并且在 Cookie 有效的时间内，就可以利用 Cookie 以这个用户的身份登录这个网站。

session id

> SessionID 的途：  
> 1、sessionID 用来判断是同一次会话，至于会话用来做什么，看需求.  
> 2、session 是保存在服务器端的，它有一个生命期，客户端的 cookie 只是保存了 id 信息，关闭浏览器时，服务器端的 session 只要还在同一个生命期内还是同一次会话。

**保存 SessionID 的方式：**

> 1、一种技术叫做表单隐藏字段。就是服务器会自动修改表单，添加一个隐藏字段，以便在表单提交时能够把 session id 传递回服务器。

> 2、保存 session id 的方式可以采用 cookie，这样在交互过程中浏览器可以自动的按照规则把这个标识发送给服务器。

> 3、由于 cookie 可以被人为的禁止，必须有其它的机制以便在 cookie 被禁止时仍然能够 session id 传递回服务器，经常采用的一种技术叫做 URL 重写，就是把 session id 附加在 URL 路径的后面，附加的方式也有两种，一种是作为 URL 路径的附加信息，另一种是作为查询字符串附加在 URL 后面。网络在整个交互过程中终保持状态，就必须在每个客户端可能请求的路径后面都包含这个 session id。

**悲索之人烈焰加身，堕落者不可饶恕。永恒燃烧的羽翼，带我脱离凡间的沉沦。**